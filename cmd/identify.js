// Generated by CoffeeScript 1.10.0
(function() {
  module.exports = function(seneca, options) {
    var cmd_identify;
    cmd_identify = function(msg, respond) {
      var account_records, email;
      email = msg.email;
      account_records = seneca.make('account');
      return account_records.list$({
        email: email
      }, function(error, accounts) {
        if (error) {
          seneca.log.error('error while loading account', email, error.message);
          seneca.act('role:error,cmd:register', {
            from: 'account.identify.entity.load$',
            message: error.message,
            args: {
              email: email
            }
          });
          return respond(null, null);
        } else {
          return respond(null, accounts[0]);
        }
      });
    };
    return cmd_identify;
  };

}).call(this);

//# sourceMappingURL=identify.js.map
